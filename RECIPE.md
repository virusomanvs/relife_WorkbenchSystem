# Документация конфигурации системы крафта

## Основные параметры рецепта

| Параметр | Тип | Описание |
|----------|-----|----------|
| `craftRecipeID` | integer | Уникальный идентификатор рецепта крафта |
| `categoryID` | string | Категория рецепта (например, "Craft") |
| `craftTitle` | string | Название рецепта, отображаемое в интерфейсе |
| `craftDescription` | string | Описание рецепта |
| `resultPreview` | string | Превью-иконка результата (classname предмета). Если указать класснейм, то в превью рецепта будет указана модель предмета, если указать путь к иконке, то будет выведена иконка. <br><img width="142" height="59" alt="image" src="https://github.com/user-attachments/assets/e09c9d1d-fe8b-466a-bf12-4c40552c1c83" /> <img width="143" height="59" alt="image" src="https://github.com/user-attachments/assets/4996c44a-0f5c-431f-92cb-8013166275c6" /> |
| `buttonCraftTitle`      | `string` | Текст на кнопке крафта. По умолчанию "Создать предмет", но вы можете указать любое другое. <br><img width="191" height="112" alt="image" src="https://github.com/user-attachments/assets/9ea6be84-4524-47a1-8eba-3a571f36ccdc" /> <img width="213" height="127" alt="image" src="https://github.com/user-attachments/assets/cc6383f5-3dd7-4f5e-beb8-7a7f6da8bbeb" /> |
| `progressTitle`         | `string` | Текст прогресса во время крафта. <br><img width="315" height="131" alt="image" src="https://github.com/user-attachments/assets/941286af-41ae-4fe8-a378-431de0257912" /> <img width="284" height="81" alt="image" src="https://github.com/user-attachments/assets/0c71f9bd-8a2e-4575-98fc-98145c37124b" /> |
| `rarityColor` | string | Цвет редкости в формате hex (например, "0xFF43A047") |
| `craftMode` | integer | Режим крафта 0 – очередь. 1 прямой - только прямой без возможности добавить в очередь  |
| `craftTimeSec` | integer | Время крафта в секундах |

## Параметры размещения результата

| Параметр | Тип | Описание |
|----------|-----|----------|
| `spawnOutsideWorkbench` | bool | Создавать результат вне верстака (0 - нет, 1 - да) |
| `resultSpawnPosOffset` | array[float] | Смещение позиции спавна результата [x, y, z] |
| `resultSpawnPosition` | array[float] | Абсолютная позиция спавна результата [x, y, z] |
| `resultSpawnOrientation` | array[float] | Ориентация результата при спавне [pitch, yaw, roll] |

## Параметры декрафта

| Параметр | Тип | Описание |
|----------|-----|----------|
| `allowDecraft` | bool | Разрешить разбор предмета (0 - нет, 1 - да) |
| `decraftNeedAttachments` | bool | Требуются ли вложения для декрафта (0 - нет, 1 - да) |
| `decraftNeedLearn` | bool | Нужно ли изучить рецепт для декрафта (0 - нет, 1 - да) |
| `decraftNeedPerk` | bool | Требуется ли перк для декрафта (0 - нет, 1 - да) |

## Параметры обучения и доступа

| Параметр | Тип | Описание |
|----------|-----|----------|
| `needToLearn` | bool | Нужно ли изучать рецепт перед использованием (0 - нет, 1 - да) |
| `deleteAfterLearn` | bool | Удалять ли рецепт после изучения (0 - нет, 1 - да) |
| `hideRecipeWithoutPerk` | bool | Скрывать рецепт без необходимого перка (0 - нет, 1 - да) |
| `requireAllPerksInList` | bool | Требуются все перки из списка (0 - нет, 1 - да) |
| `needPerkToCraft` | array[integer] | Массив ID перков, необходимых для крафта |
| `needToChooseResult` | bool | Нужно ли выбирать результат из нескольких вариантов (0 - нет, 1 - да) |

## Параметры опыта и навыков

| Параметр | Тип | Описание |
|----------|-----|----------|
| `addPerkPointsSkillTypes` | array[string] | Типы навыков, к которым добавляются очки опыта (например, "HUNTING") |
| `addPerkPointsValue` | array[float] | Количество очков опыта, добавляемых к соответствующим навыкам |

## Результаты крафта (results)

| Параметр | Тип | Описание |
|----------|-----|----------|
| `classname` | string | Класс предмета-результата |
| `resultTitle` | string | Название результата (если пусто - используется стандартное) |
| `resultPreview` | string | Превью результата (если пусто - используется classname) |
| `showResultAttachmentsInfo` | integer | Показывать информацию о вложениях результата (0 - нет, 1 - да) |
| `chance` | float | Шанс получения результата (0.0 - для гарантированного результата) |

### Параметры состояния результата

| Параметр | Тип | Описание |
|----------|-----|----------|
| `health` | array[float] | Здоровье предмета в прцоентах от 0 до 1 [точное, мин, макс]. Если первое значение -1, используется случайное между мин и макс |
| `count` | array[integer] | Количество предметов [точное, мин, макс]. Если первое значение -1, используется случайное между мин и макс |
| `quantity` | array[float] | Количество содержимого в фактическом значении [точное, мин, макс]. Если первое значение -1, используется случайное между мин и макс |
| `energy` | array[float] | Энергия предмета [точное, мин, макс]. Если первое значение -1, используется случайное между мин и макс |
| `liquid` | integer | Тип жидкости (-1 или 0 = нет жидкости) |
| `foodStage` | integer | Стадия еды (-1 = игнорировать) |
| `cleanness` | integer | Чистота предмета (-1 = игнорировать) |

## Требуемые вложения (needAttachment)

| Параметр | Тип | Описание |
|----------|-----|----------|
| `isKindOf` | integer | Проверять класс через isKindOf (0 - точное совпадение, 1 - наследование) |
| `attachType` | string | Класс требуемого вложения |
| `attachSlot` | string | Слот для вложения на верстаке |
| `needElectricityOn` | bool | Требуется ли включенное электричество (0 - нет, 1 - да) |
| `hideRecipeIfMissing` | bool | Скрывать рецепт при отсутствии вложения (0 - нет, 1 - да) |
| `damageAfterCraft` | float | Урон вложению после крафта (0.0 = без урона) |
| `decreaseQuantityAfterCraft` | float | Уменьшение количества содержимого вложения после крафта |

### Уменьшение параметров вложенных элементов

| Параметр | Тип | Описание |
|----------|-----|----------|
| `decreaseAttachHealth` | object | Объект с парами "класс": значение для уменьшения здоровья вложенных элементов |
| `decreaseAttachQuantity` | object | Объект с парами "класс": значение для уменьшения количества вложенных элементов (например, "RLF_GrinderDiskLeft": -50.0) |

## Требуемые ингредиенты (needIngredients)

| Параметр | Тип | Описание |
|----------|-----|----------|
| `isKindOf` | integer | Проверять класс через isKindOf (0 - точное совпадение, 1 - наследование) |
| `itemTitle` | string | Название ингредиента (если пусто - используется стандартное) |
| `itemClassname` | array[string] | Массив допустимых классов ингредиентов |
| `itemPreview` | string | Класс для отображения превью ингредиента или путь иконке|
| `itemCount` | integer | Требуемое количество предметов |
| `itemHealth` | integer | Минимальное требуемое здоровье предмета (значение не в процентах, а в уровне здоровья, смотрите памятку ниже) |
| `destroyItem` | integer | Уничтожать ли предмет после крафта (0 - нет, 1 - да) |

### Параметры состояния ингредиентов

| Параметр | Тип | Описание |
|----------|-----|----------|
| `itemQuantity` | array[float] | Требуемое количество содержимого [мин, макс] |
| `itemEnergy` | array[float] | Требуемая энергия [точное, мин, макс]. Если первое значение -1, используется диапазон мин-макс |
| `itemFoodStage` | array[integer] | Допустимые стадии еды (пустой массив = любая) |
| `itemCleanness` | integer | Требуемая чистота (-1 = игнорировать) |
| `itemLiquidType` | integer | Требуемый тип жидкости (-1 = игнорировать) |
| `itemHaveEnergy` | integer | Должен ли предмет иметь энергию (0 - нет, 1 - да) |

### Изменения ингредиентов после крафта

| Параметр | Тип | Описание |
|----------|-----|----------|
| `itemDamageAfterCraft` | array[float] | Урон предмету после крафта [точное, мин, макс]. Если первое значение 0, используется случайное между мин и макс |
| `itemQuantityAfterCraft` | array[float] | Изменение количества содержимого после крафта [точное, мин, макс]. Если первое значение 0, используется случайное между мин и макс |
| `itemDecraftCount` | float | Количество предметов при декрафте |
| `itemDecraftHealth` | float | Здоровье предметов при декрафте |
| `itemQuantityEnergyDecreaseCoef` | float | Коэффициент уменьшения количества/энергии |
| `itemDecraftFoodStage` | integer | Стадия еды при декрафте |

## Примечания

🛠 Состояния предметов (Health States)
В параметрах ингрединта (itemHealth) можно указывать состояние предмета.
| Значение | Константа                 | Описание                                 |
| -------- | ------------------------- | ---------------------------------------- |
| `0`      | **STATE\_PRISTINE**       | Идеальное состояние (новый предмет).     |
| `1`      | **STATE\_WORN**           | Ношеный (немного поношен, но в порядке). |
| `2`      | **STATE\_DAMAGED**        | Повреждённый (средние повреждения).      |
| `3`      | **STATE\_BADLY\_DAMAGED** | Сильно повреждённый (почти сломан).      |
| `4`      | **STATE\_RUINED**         | Сломанный (непригоден к использованию).  |

📌 Применение:
В needIngredients → itemHealth можно указать минимальное требуемое состояние предмета.
Например: 3 — можно использовать даже сильно повреждённый предмет.

---

🥩 Стадии еды (FoodStage)
В параметрах foodStage или itemFoodStage указывается стадия приготовления/состояния еды.
| Значение | Название   | Описание              |
| -------- | ---------- | --------------------- |
| `1`      | **RAW**    | Сырой. |
| `2`      | **BAKED**  | Запечённый.           |
| `3`      | **BOILED** | Варёный.              |
| `4`      | **DRIED**  | Вяленый/сушёный.      |
| `5`      | **BURNED** | Сгоревший.            |
| `6`      | **ROTTEN** | Испорченный.          |


- **Массивы из 3 элементов**: `[точное значение, мин, макс]`
  - Если первое значение не равно -1 (или 0 для некоторых параметров), используется точное значение
  - Если первое значение равно -1 (или 0), используется случайное значение в диапазоне от мин до макс
- Значения `-1` обычно означают "игнорировать этот параметр"
- Цвета указываются в формате hex с префиксом `0xFF` (ARGB)
- Для boolean-значений используется `0` (false) и `1` (true)
